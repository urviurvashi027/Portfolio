(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/forms')) :
    typeof define === 'function' && define.amd ? define('ngx-ckeditor', ['exports', '@angular/core', '@angular/forms'], factory) :
    (factory((global['ngx-ckeditor'] = {}),global.ng.core,global.ng.forms));
}(this, (function (exports,core,forms) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var defaults = {
        contentsCss: [''],
        customConfig: ''
    };
    var CKEditorComponent = /** @class */ (function () {
        function CKEditorComponent(ngZone, hostEl) {
            this.ngZone = ngZone;
            this.hostEl = hostEl;
            this.innerValue = '';
            this.disabled = false;
            this.editorInitialized = false;
            /**
             * Is readonly mode, default:false
             */
            this.readonly = false;
            /**
             * The ck-editor config object.
             */
            this.config = {};
            /**
             * The special skin, default: moono-lisa
             */
            this.skin = 'moono-lisa';
            /**
             * The special language, default: en
             */
            this.language = 'en';
            /**
             * Use fullpage mode, default:false
             */
            this.fullPage = false;
            /**
             * Use inline mode, default: false
             */
            this.inline = false;
            this.change = new core.EventEmitter();
            this.ready = new core.EventEmitter();
            this.blur = new core.EventEmitter();
            this.focus = new core.EventEmitter();
            this.onChange = function (value) { };
            this.onTouched = function () { };
            this.identifier = CKEditorComponent.getRandomIdentifier(this.id);
        }
        /**
         * @private
         * @param {?=} id
         * @return {?}
         */
        CKEditorComponent.getRandomIdentifier = /**
         * @private
         * @param {?=} id
         * @return {?}
         */
            function (id) {
                if (id === void 0) {
                    id = '';
                }
                return 'editor-' + (id !== '' ? id : String(CKEditorComponent.idx++));
            };
        Object.defineProperty(CKEditorComponent.prototype, "instance", {
            get: /**
             * @return {?}
             */ function () {
                return this.ckIns;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        CKEditorComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () { };
        /**
         * @param {?} changes
         * @return {?}
         */
        CKEditorComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                if (this.editorInitialized) {
                    this.destroyEditor();
                    this.initEditor(this.identifier);
                }
            };
        /**
         * @return {?}
         */
        CKEditorComponent.prototype.ngAfterViewChecked = /**
         * @return {?}
         */
            function () {
                if (!this.editorInitialized && this.documentContains(this.textareaRef.nativeElement)) {
                    this.editorInitialized = true;
                    this.initEditor(this.identifier);
                }
                else if (this.editorInitialized && !this.documentContains(this.textareaRef.nativeElement)) {
                    this.editorInitialized = false;
                    this.destroyEditor();
                }
            };
        /**
         * @return {?}
         */
        CKEditorComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.destroyEditor();
            };
        /**
         * @private
         * @param {?} identifier
         * @return {?}
         */
        CKEditorComponent.prototype.initEditor = /**
         * @private
         * @param {?} identifier
         * @return {?}
         */
            function (identifier) {
                var _this = this;
                if (typeof CKEDITOR === 'undefined') {
                    return console.warn('CKEditor 4.x is missing (http://ckeditor.com/)');
                }
                /** @type {?} */
                var textareaEl = this.textareaRef.nativeElement;
                this.identifier = identifier;
                textareaEl.setAttribute('name', this.identifier);
                if (this.ckIns || !this.documentContains(this.textareaRef.nativeElement)) {
                    return;
                }
                /** @type {?} */
                var opt = Object.assign({}, defaults, this.config, {
                    readOnly: this.readonly,
                    skin: this.skin,
                    language: this.language,
                    fullPage: this.fullPage,
                    inline: this.inline
                });
                this.ckIns = this.inline ? CKEDITOR.inline(textareaEl, opt) : CKEDITOR.replace(textareaEl, opt);
                this.ckIns.setData(this.innerValue);
                this.ckIns.on('change', function () {
                    /** @type {?} */
                    var val = _this.ckIns.getData();
                    _this.updateValue(val);
                });
                this.ckIns.on('instanceReady', function (evt) {
                    _this.ngZone.run(function () {
                        _this.ready.emit(evt);
                    });
                });
                this.ckIns.on('blur', function (evt) {
                    _this.ngZone.run(function () {
                        _this.blur.emit(evt);
                        _this.onTouched();
                    });
                });
                this.ckIns.on('focus', function (evt) {
                    _this.ngZone.run(function () {
                        _this.focus.emit(evt);
                    });
                });
            };
        /**
         * @private
         * @return {?}
         */
        CKEditorComponent.prototype.destroyEditor = /**
         * @private
         * @return {?}
         */
            function () {
                if (this.ckIns) {
                    // If use destroy, will fire 'Error code: editor-destroy-iframe'
                    // this.ckIns.destroy();
                    if (CKEDITOR.instances.hasOwnProperty(this.ckIns.name)) {
                        CKEDITOR.remove(CKEDITOR.instances[this.ckIns.name]);
                    }
                    this.ckIns = null;
                    /** @type {?} */
                    var editorEl = this.hostEl.nativeElement.querySelector('#cke_' + this.identifier);
                    if (editorEl != null && editorEl.parentElement) {
                        editorEl.parentElement.removeChild(editorEl);
                    }
                }
            };
        /**
         * @private
         * @param {?} value
         * @return {?}
         */
        CKEditorComponent.prototype.updateValue = /**
         * @private
         * @param {?} value
         * @return {?}
         */
            function (value) {
                var _this = this;
                this.ngZone.run(function () {
                    _this.innerValue = value;
                    _this.onChange(value);
                    _this.onTouched();
                    _this.change.emit(value);
                });
            };
        /**
         * @private
         * @param {?} node
         * @return {?}
         */
        CKEditorComponent.prototype.documentContains = /**
         * @private
         * @param {?} node
         * @return {?}
         */
            function (node) {
                return document.contains ? document.contains(node) : document.body.contains(node);
            };
        /**
         * @param {?} value
         * @return {?}
         */
        CKEditorComponent.prototype.writeValue = /**
         * @param {?} value
         * @return {?}
         */
            function (value) {
                this.innerValue = value || '';
                if (this.ckIns) {
                    // Fix bug that can't emit change event when set non-html tag value twice in fullpage mode.
                    this.ckIns.setData(this.innerValue);
                    /** @type {?} */
                    var val = this.ckIns.getData();
                    this.ckIns.setData(val);
                }
            };
        /**
         * @param {?} fn
         * @return {?}
         */
        CKEditorComponent.prototype.registerOnChange = /**
         * @param {?} fn
         * @return {?}
         */
            function (fn) {
                this.onChange = fn;
            };
        /**
         * @param {?} fn
         * @return {?}
         */
        CKEditorComponent.prototype.registerOnTouched = /**
         * @param {?} fn
         * @return {?}
         */
            function (fn) {
                this.onTouched = fn;
            };
        /**
         * @param {?} isDisabled
         * @return {?}
         */
        CKEditorComponent.prototype.setDisabledState = /**
         * @param {?} isDisabled
         * @return {?}
         */
            function (isDisabled) {
                this.disabled = isDisabled;
            };
        CKEditorComponent.idx = 1;
        CKEditorComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'ck-editor',
                        template: "\n    <textarea #textarea></textarea>\n  ",
                        providers: [{ provide: forms.NG_VALUE_ACCESSOR, useExisting: core.forwardRef(function () { return CKEditorComponent; }), multi: true }],
                        exportAs: 'ckEditor'
                    },] },
        ];
        /** @nocollapse */
        CKEditorComponent.ctorParameters = function () {
            return [
                { type: core.NgZone },
                { type: core.ElementRef }
            ];
        };
        CKEditorComponent.propDecorators = {
            readonly: [{ type: core.Input }],
            config: [{ type: core.Input }],
            skin: [{ type: core.Input }],
            language: [{ type: core.Input }],
            fullPage: [{ type: core.Input }],
            inline: [{ type: core.Input }],
            id: [{ type: core.Input }],
            change: [{ type: core.Output }],
            ready: [{ type: core.Output }],
            blur: [{ type: core.Output }],
            focus: [{ type: core.Output }],
            textareaRef: [{ type: core.ViewChild, args: ['textarea',] }]
        };
        return CKEditorComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CKEditorModule = /** @class */ (function () {
        function CKEditorModule() {
        }
        CKEditorModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [],
                        exports: [forms.FormsModule, CKEditorComponent],
                        declarations: [CKEditorComponent],
                        providers: []
                    },] },
        ];
        return CKEditorModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    exports.CKEditorComponent = CKEditorComponent;
    exports.CKEditorModule = CKEditorModule;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWNrZWRpdG9yLnVtZC5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vbmd4LWNrZWRpdG9yL2xpYi9jay1lZGl0b3IuY29tcG9uZW50LnRzIiwibmc6Ly9uZ3gtY2tlZGl0b3IvbGliL2NrLWVkaXRvci5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBBZnRlclZpZXdJbml0LFxyXG4gIEFmdGVyVmlld0NoZWNrZWQsXHJcbiAgQ29tcG9uZW50LFxyXG4gIEVsZW1lbnRSZWYsXHJcbiAgRXZlbnRFbWl0dGVyLFxyXG4gIElucHV0LFxyXG4gIE5nWm9uZSxcclxuICBPbkNoYW5nZXMsXHJcbiAgT25EZXN0cm95LFxyXG4gIE9uSW5pdCxcclxuICBPdXRwdXQsXHJcbiAgU2ltcGxlQ2hhbmdlcyxcclxuICBWaWV3Q2hpbGQsXHJcbiAgZm9yd2FyZFJlZlxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcblxyXG5kZWNsYXJlIHZhciBDS0VESVRPUjogYW55O1xyXG5cclxuY29uc3QgZGVmYXVsdHMgPSB7XHJcbiAgY29udGVudHNDc3M6IFsnJ10sXHJcbiAgY3VzdG9tQ29uZmlnOiAnJ1xyXG59O1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdjay1lZGl0b3InLFxyXG4gIHRlbXBsYXRlOiBgXHJcbiAgICA8dGV4dGFyZWEgI3RleHRhcmVhPjwvdGV4dGFyZWE+XHJcbiAgYCxcclxuICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLCB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBDS0VkaXRvckNvbXBvbmVudCksIG11bHRpOiB0cnVlIH1dLFxyXG4gIGV4cG9ydEFzOiAnY2tFZGl0b3InXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBDS0VkaXRvckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95LCBPbkNoYW5nZXMsIEFmdGVyVmlld0NoZWNrZWQsIENvbnRyb2xWYWx1ZUFjY2Vzc29yIHtcclxuICBwcml2YXRlIGNrSW5zOiBhbnk7XHJcbiAgcHJpdmF0ZSBpbm5lclZhbHVlID0gJyc7XHJcbiAgcHJpdmF0ZSBpZGVudGlmaWVyOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBkaXNhYmxlZCA9IGZhbHNlO1xyXG4gIHByaXZhdGUgZWRpdG9ySW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuXHJcbiAgLyoqXHJcbiAgICogSXMgcmVhZG9ubHkgbW9kZSwgZGVmYXVsdDpmYWxzZVxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIHB1YmxpYyByZWFkb25seSA9IGZhbHNlO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBjay1lZGl0b3IgY29uZmlnIG9iamVjdC5cclxuICAgKi9cclxuICBASW5wdXQoKSBwdWJsaWMgY29uZmlnOiBhbnkgPSB7fTtcclxuICAvKipcclxuICAgKiBUaGUgc3BlY2lhbCBza2luLCBkZWZhdWx0OiBtb29uby1saXNhXHJcbiAgICovXHJcbiAgQElucHV0KCkgcHVibGljIHNraW4gPSAnbW9vbm8tbGlzYSc7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNwZWNpYWwgbGFuZ3VhZ2UsIGRlZmF1bHQ6IGVuXHJcbiAgICovXHJcbiAgQElucHV0KCkgcHVibGljIGxhbmd1YWdlID0gJ2VuJztcclxuICAvKipcclxuICAgKiBVc2UgZnVsbHBhZ2UgbW9kZSwgZGVmYXVsdDpmYWxzZVxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIHB1YmxpYyBmdWxsUGFnZSA9IGZhbHNlO1xyXG4gIC8qKlxyXG4gICAqIFVzZSBpbmxpbmUgbW9kZSwgZGVmYXVsdDogZmFsc2VcclxuICAgKi9cclxuICBASW5wdXQoKSBwdWJsaWMgaW5saW5lID0gZmFsc2U7XHJcbiAgLyoqXHJcbiAgICogVGhlIGVkaXRvciBpZFxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIHB1YmxpYyBpZDogc3RyaW5nO1xyXG5cclxuICBAT3V0cHV0KCkgcHVibGljIGNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICBAT3V0cHV0KCkgcHVibGljIHJlYWR5ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIEBPdXRwdXQoKSBwdWJsaWMgYmx1ciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICBAT3V0cHV0KCkgcHVibGljIGZvY3VzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICBAVmlld0NoaWxkKCd0ZXh0YXJlYScpIHB1YmxpYyB0ZXh0YXJlYVJlZjogRWxlbWVudFJlZjtcclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgaWR4ID0gMTtcclxuICBwcml2YXRlIHN0YXRpYyBnZXRSYW5kb21JZGVudGlmaWVyKGlkOiBzdHJpbmcgPSAnJykge1xyXG4gICAgcmV0dXJuICdlZGl0b3ItJyArIChpZCAhPT0gJycgPyBpZCA6IFN0cmluZyhDS0VkaXRvckNvbXBvbmVudC5pZHgrKykpO1xyXG4gIH1cclxuXHJcbiAgb25DaGFuZ2UgPSAodmFsdWU6IHN0cmluZykgPT4ge307XHJcbiAgb25Ub3VjaGVkID0gKCkgPT4ge307XHJcblxyXG4gIHB1YmxpYyBnZXQgaW5zdGFuY2UoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5ja0lucztcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbmdab25lOiBOZ1pvbmUsIHByaXZhdGUgaG9zdEVsOiBFbGVtZW50UmVmKSB7XHJcbiAgICB0aGlzLmlkZW50aWZpZXIgPSBDS0VkaXRvckNvbXBvbmVudC5nZXRSYW5kb21JZGVudGlmaWVyKHRoaXMuaWQpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7fVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5lZGl0b3JJbml0aWFsaXplZCkge1xyXG4gICAgICB0aGlzLmRlc3Ryb3lFZGl0b3IoKTtcclxuICAgICAgdGhpcy5pbml0RWRpdG9yKHRoaXMuaWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0NoZWNrZWQoKSB7XHJcbiAgICBpZiAoIXRoaXMuZWRpdG9ySW5pdGlhbGl6ZWQgJiYgdGhpcy5kb2N1bWVudENvbnRhaW5zKHRoaXMudGV4dGFyZWFSZWYubmF0aXZlRWxlbWVudCkpIHtcclxuICAgICAgdGhpcy5lZGl0b3JJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgIHRoaXMuaW5pdEVkaXRvcih0aGlzLmlkZW50aWZpZXIpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmVkaXRvckluaXRpYWxpemVkICYmICF0aGlzLmRvY3VtZW50Q29udGFpbnModGhpcy50ZXh0YXJlYVJlZi5uYXRpdmVFbGVtZW50KSkge1xyXG4gICAgICB0aGlzLmVkaXRvckluaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuZGVzdHJveUVkaXRvcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICB0aGlzLmRlc3Ryb3lFZGl0b3IoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5pdEVkaXRvcihpZGVudGlmaWVyOiBzdHJpbmcpIHtcclxuICAgIGlmICh0eXBlb2YgQ0tFRElUT1IgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHJldHVybiBjb25zb2xlLndhcm4oJ0NLRWRpdG9yIDQueCBpcyBtaXNzaW5nIChodHRwOi8vY2tlZGl0b3IuY29tLyknKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHRleHRhcmVhRWwgPSB0aGlzLnRleHRhcmVhUmVmLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICB0aGlzLmlkZW50aWZpZXIgPSBpZGVudGlmaWVyO1xyXG4gICAgdGV4dGFyZWFFbC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCB0aGlzLmlkZW50aWZpZXIpO1xyXG4gICAgaWYgKHRoaXMuY2tJbnMgfHwgIXRoaXMuZG9jdW1lbnRDb250YWlucyh0aGlzLnRleHRhcmVhUmVmLm5hdGl2ZUVsZW1lbnQpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBvcHQgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0cywgdGhpcy5jb25maWcsIHtcclxuICAgICAgcmVhZE9ubHk6IHRoaXMucmVhZG9ubHksXHJcbiAgICAgIHNraW46IHRoaXMuc2tpbixcclxuICAgICAgbGFuZ3VhZ2U6IHRoaXMubGFuZ3VhZ2UsXHJcbiAgICAgIGZ1bGxQYWdlOiB0aGlzLmZ1bGxQYWdlLFxyXG4gICAgICBpbmxpbmU6IHRoaXMuaW5saW5lXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmNrSW5zID0gdGhpcy5pbmxpbmUgPyBDS0VESVRPUi5pbmxpbmUodGV4dGFyZWFFbCwgb3B0KSA6IENLRURJVE9SLnJlcGxhY2UodGV4dGFyZWFFbCwgb3B0KTtcclxuICAgIHRoaXMuY2tJbnMuc2V0RGF0YSh0aGlzLmlubmVyVmFsdWUpO1xyXG5cclxuICAgIHRoaXMuY2tJbnMub24oJ2NoYW5nZScsICgpID0+IHtcclxuICAgICAgY29uc3QgdmFsID0gdGhpcy5ja0lucy5nZXREYXRhKCk7XHJcbiAgICAgIHRoaXMudXBkYXRlVmFsdWUodmFsKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuY2tJbnMub24oJ2luc3RhbmNlUmVhZHknLCAoZXZ0OiBhbnkpID0+IHtcclxuICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcclxuICAgICAgICB0aGlzLnJlYWR5LmVtaXQoZXZ0KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmNrSW5zLm9uKCdibHVyJywgKGV2dDogYW55KSA9PiB7XHJcbiAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5ibHVyLmVtaXQoZXZ0KTtcclxuICAgICAgICB0aGlzLm9uVG91Y2hlZCgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuY2tJbnMub24oJ2ZvY3VzJywgKGV2dDogYW55KSA9PiB7XHJcbiAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5mb2N1cy5lbWl0KGV2dCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGRlc3Ryb3lFZGl0b3IoKSB7XHJcbiAgICBpZiAodGhpcy5ja0lucykge1xyXG4gICAgICAvLyBJZiB1c2UgZGVzdHJveSwgd2lsbCBmaXJlICdFcnJvciBjb2RlOiBlZGl0b3ItZGVzdHJveS1pZnJhbWUnXHJcbiAgICAgIC8vIHRoaXMuY2tJbnMuZGVzdHJveSgpO1xyXG4gICAgICBpZiAoQ0tFRElUT1IuaW5zdGFuY2VzLmhhc093blByb3BlcnR5KHRoaXMuY2tJbnMubmFtZSkpIHtcclxuICAgICAgICBDS0VESVRPUi5yZW1vdmUoQ0tFRElUT1IuaW5zdGFuY2VzW3RoaXMuY2tJbnMubmFtZV0pO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuY2tJbnMgPSBudWxsO1xyXG4gICAgICBjb25zdCBlZGl0b3JFbCA9IHRoaXMuaG9zdEVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignI2NrZV8nICsgdGhpcy5pZGVudGlmaWVyKTtcclxuICAgICAgaWYgKGVkaXRvckVsICE9IG51bGwgJiYgZWRpdG9yRWwucGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgIGVkaXRvckVsLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoZWRpdG9yRWwpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZVZhbHVlKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XHJcbiAgICAgIHRoaXMuaW5uZXJWYWx1ZSA9IHZhbHVlO1xyXG4gICAgICB0aGlzLm9uQ2hhbmdlKHZhbHVlKTtcclxuICAgICAgdGhpcy5vblRvdWNoZWQoKTtcclxuICAgICAgdGhpcy5jaGFuZ2UuZW1pdCh2YWx1ZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZG9jdW1lbnRDb250YWlucyhub2RlOiBOb2RlKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnQuY29udGFpbnMgPyBkb2N1bWVudC5jb250YWlucyhub2RlKSA6IGRvY3VtZW50LmJvZHkuY29udGFpbnMobm9kZSk7XHJcbiAgfVxyXG5cclxuICB3cml0ZVZhbHVlKHZhbHVlOiBhbnkpOiB2b2lkIHtcclxuICAgIHRoaXMuaW5uZXJWYWx1ZSA9IHZhbHVlIHx8ICcnO1xyXG4gICAgaWYgKHRoaXMuY2tJbnMpIHtcclxuICAgICAgLy8gRml4IGJ1ZyB0aGF0IGNhbid0IGVtaXQgY2hhbmdlIGV2ZW50IHdoZW4gc2V0IG5vbi1odG1sIHRhZyB2YWx1ZSB0d2ljZSBpbiBmdWxscGFnZSBtb2RlLlxyXG4gICAgICB0aGlzLmNrSW5zLnNldERhdGEodGhpcy5pbm5lclZhbHVlKTtcclxuICAgICAgY29uc3QgdmFsID0gdGhpcy5ja0lucy5nZXREYXRhKCk7XHJcbiAgICAgIHRoaXMuY2tJbnMuc2V0RGF0YSh2YWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgIHRoaXMub25DaGFuZ2UgPSBmbjtcclxuICB9XHJcblxyXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiAoKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xyXG4gIH1cclxuXHJcbiAgc2V0RGlzYWJsZWRTdGF0ZT8oaXNEaXNhYmxlZDogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBDS0VkaXRvckNvbXBvbmVudCB9IGZyb20gJy4vY2stZWRpdG9yLmNvbXBvbmVudCc7XHJcblxyXG5ATmdNb2R1bGUoe1xyXG4gIGltcG9ydHM6IFtdLFxyXG4gIGV4cG9ydHM6IFtGb3Jtc01vZHVsZSwgQ0tFZGl0b3JDb21wb25lbnRdLFxyXG4gIGRlY2xhcmF0aW9uczogW0NLRWRpdG9yQ29tcG9uZW50XSxcclxuICBwcm92aWRlcnM6IFtdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBDS0VkaXRvck1vZHVsZSB7fVxyXG4iXSwibmFtZXMiOlsiRXZlbnRFbWl0dGVyIiwiQ29tcG9uZW50IiwiTkdfVkFMVUVfQUNDRVNTT1IiLCJmb3J3YXJkUmVmIiwiTmdab25lIiwiRWxlbWVudFJlZiIsIklucHV0IiwiT3V0cHV0IiwiVmlld0NoaWxkIiwiTmdNb2R1bGUiLCJGb3Jtc01vZHVsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO1FBb0JNLFFBQVEsR0FBRztRQUNmLFdBQVcsRUFBRSxDQUFDLEVBQUUsQ0FBQztRQUNqQixZQUFZLEVBQUUsRUFBRTtLQUNqQjtBQUVEO1FBK0RFLDJCQUFvQixNQUFjLEVBQVUsTUFBa0I7WUFBMUMsV0FBTSxHQUFOLE1BQU0sQ0FBUTtZQUFVLFdBQU0sR0FBTixNQUFNLENBQVk7WUFyRHRELGVBQVUsR0FBRyxFQUFFLENBQUM7WUFFaEIsYUFBUSxHQUFHLEtBQUssQ0FBQztZQUNqQixzQkFBaUIsR0FBRyxLQUFLLENBQUM7Ozs7WUFLbEIsYUFBUSxHQUFHLEtBQUssQ0FBQzs7OztZQUlqQixXQUFNLEdBQVEsRUFBRSxDQUFDOzs7O1lBSWpCLFNBQUksR0FBRyxZQUFZLENBQUM7Ozs7WUFJcEIsYUFBUSxHQUFHLElBQUksQ0FBQzs7OztZQUloQixhQUFRLEdBQUcsS0FBSyxDQUFDOzs7O1lBSWpCLFdBQU0sR0FBRyxLQUFLLENBQUM7WUFNZCxXQUFNLEdBQUcsSUFBSUEsaUJBQVksRUFBRSxDQUFDO1lBQzVCLFVBQUssR0FB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